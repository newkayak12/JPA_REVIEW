식별과 비식별 관계의 장단점

보통 아래와 같은 이유로 비식별 관계를 선호한다.

    식별 관계는 부모 테이블의 기본키를 자식테이블로 보내면서 자식 테이블의 기본키 컬럼이 늘어난다. :: 이는 SQL이 복잡해지고 기본 키 인덱스가 불필요하게 커지는 결과를 낳을 수도 있다.
    식별 관계는 2개 이상의 컬럼을 합쳐서 복합키를 만들어야하는 경우가 잦다.
    식별 관계로 두면 비즈니스 요구사항에 따라 변화할 때 변경이 어렵게하는 면이 있다.
    식별 관계는 부모 테이블의 기본 키를 자식 테이블에서 기본 키로 사용하므로 비식별보다 테이블 구조가 경직적이다.


    비식별 관계는 식별 관계와 달리 기본키 매핑에 많은 노력이 들지 않는다.
    비식별 관계를 사용하면 JPA에서 제공하는 @GenerateValue를 통해서 손쉽게 대리 키를 사용할 수 있다.


물론 식별 관계가 가지는 장점도 있다.
    기본 키 인덱스를 활용하기 좋다.
            부모 아이디가 A 인 모든 자식 조회
        > SELECT * FROM CHILD WHERE PARENT_ID = 'A';
            부모 아이디가  A이고 자식 아이디가 B인 자식 조회
        > SELECT * FROM CHILD WHERE PARENT_ID = 'A' AND CHILD_ID = 'B';

    상위 테이블들이 기본 키 컬럼을 자식, 손자 테이블들이 가지고 있으므로 특정 상황에서 조인 없이 하위 테이블만으로 검색을 할 수 있다.



결로적으로 비식별을 사용하면 기본키 전략이 편리하고 관리하기가 편한 경우가 있다. 선택적 비식별보다는 필수적 비식별로 구성하는 것이 낫다.